this file is pseudocode from f1 branch
